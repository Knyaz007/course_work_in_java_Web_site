<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Edit Room</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        img.room-photo {
            max-width: 200px;
            max-height: 150px;
            margin-right: 10px;
        }

        #hotel-info p {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
<div class="container mt-4">
    <h2 class="mb-4">Редактировать комнату</h2>

    <form th:action="@{'/rooms/edit'}" th:object="${room}" method="post" enctype="multipart/form-data">
        <!-- Идентификаторы -->
        <input type="hidden" th:field="*{id}"/>
        <input type="hidden" name="hotelId" th:value="${hotelRoom.id}"/>

        <!-- Информация об отеле -->
        <div class="mb-3">
            <label class="font-weight-bold">Отель:</label>
            <p th:text="${hotelRoom.name}"></p>
            <p th:text="${hotelRoom.region + ', ' + hotelRoom.city + ', ' + hotelRoom.street + ', ' + hotelRoom.house}"></p>
        </div>

        <!-- Существующие фотографии комнаты -->
       <!-- Существующие фотографии комнаты -->
<div class="mb-4">
    <h5 class="text-secondary">Существующие фотографии:</h5>
    <div class="d-flex flex-wrap border p-2 rounded bg-light">
        <div th:each="photo : ${room.photos}" class="mr-3 mb-2 text-center">
            <img th:src="@{'/uploads/hotel-' + ${hotelRoom.id} + '/room-' + ${room.id} + '/' + ${photo}}" 
                 alt="Room Photo" class="room-photo rounded shadow-sm"/>
            <input type="hidden" name="existingPhotos" th:value="${photo}" />
        </div>
    </div>
</div>

        <!-- Описание комнаты -->
        <div class="form-group">
            <label for="description">Описание:</label>
            <input type="text" th:field="*{description}" id="description" class="form-control" required />
        </div>

        <!-- Цена -->
        <div class="form-group">
            <label for="price">Цена:</label>
            <input type="number" th:field="*{price}" id="price" class="form-control" step="0.01" min="0" required />
        </div>

        <!-- Загрузка новых фото -->
        <div class="form-group">
            <label for="photos">Добавить новые фото:</label>
            <input type="file" id="photos" name="photos" class="form-control-file" multiple />
        </div>

        <!-- Кнопка отправки -->
        <button type="submit" class="btn btn-primary">Сохранить</button>
    </form>
</div>

<!-- Bootstrap JS -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
