<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Список пользователей</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"> <style>
    body {
      padding: 20px;
      background-color: #f8f9fa; /* Light background for a modern look */
    }
    .container-fluid { /* Use container-fluid for full width content */
      max-width: 1200px; /* Limit width for better readability on large screens */
      margin: 0 auto;
    }
    .table th, .table td {
      vertical-align: middle;
      text-align: center; /* Center align table content */
    }
    .table thead th {
      background-color: #007bff; /* Primary color for table header */
      color: white;
      border-color: #007bff;
    }
    .table-hover tbody tr:hover {
      background-color: #e2f0ff; /* Light blue on hover */
    }
    .action-buttons a {
      margin: 0 3px; /* Slightly adjust margin for buttons */
    }
    .card {
      margin-top: 30px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* Subtle shadow for the card */
      border: none;
    }
    .card-header {
      background-color: #ffffff;
      border-bottom: 1px solid #dee2e6;
      padding: 1.25rem 1.5rem;
      font-size: 1.5rem;
      font-weight: 500;
      color: #343a40;
    }
    .btn-success {
      background-color: #28a745;
      border-color: #28a745;
    }
    .btn-info {
      background-color: #17a2b8;
      border-color: #17a2b8;
    }
    .btn-warning {
      background-color: #ffc107;
      border-color: #ffc107;
      color: #212529; /* Ensure good contrast for warning button text */
    }
    .btn-danger {
      background-color: #dc3545;
      border-color: #dc3545;
    }
    /* Style for embedded iframes */
    #banner-frame, #navbar-frame, #footer-frame {
      display: block;
      width: 100%;
      border: none;
      /* Consider setting a min-height if the content in iframes is dynamic */
      min-height: 50px; /* Example min-height, adjust as needed */
    }
    #footer-frame {
      margin-top: 40px; /* Keep consistent margin */
    }
  </style>
</head>
<body>

  <iframe id="banner-frame" th:src="@{/banner}" width="100%" scrolling="no"></iframe>
  <iframe id="navbar-frame" th:src="@{/navbar}" width="100%"></iframe>

  <div class="container-fluid">
    <div class="card">
      <div class="card-header d-flex justify-content-between align-items-center">
        <span><i class="fas fa-users mr-2"></i>Список пользователей</span> <a th:href="@{/users/new}" class="btn btn-success">
          <i class="fas fa-plus-circle mr-1"></i>Добавить пользователя
        </a>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-bordered table-hover">
            <thead class="thead-light">
              <tr>
                <th>Имя</th>
                <th>Фамилия</th>
                <th>Действия</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="user : ${users}">
                <td th:text="${user.name}"></td>
                <td th:text="${user.lastName}"></td>
                <td class="action-buttons">
                  <a th:href="@{/users/details/{userId}(userId=${user.userId})}" class="btn btn-info btn-sm" title="Подробнее">
                    <i class="fas fa-eye"></i> </a>
                  <a th:href="@{/users/edit/{userId}(userId=${user.userId})}"
                     th:if="${roles.contains('ROLE_ADMIN')}" class="btn btn-warning btn-sm" title="Редактировать">
                    <i class="fas fa-edit"></i> </a>
                  <a th:href="@{/users/delete/{userId}(userId=${user.userId})}"
                     th:if="${roles.contains('ROLE_ADMIN')}" class="btn btn-danger btn-sm" title="Удалить">
                    <i class="fas fa-trash-alt"></i> </a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div th:if="${#lists.isEmpty(users)}" class="alert alert-info text-center mt-3" role="alert">
          Пользователи не найдены. Добавьте нового пользователя, чтобы начать.
        </div>
      </div>
    </div>
  </div>

  <iframe id="footer-frame" th:src="@{/footer}" width="100%"></iframe>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.0.8/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script th:src="@{/public/js/scripts.js}"></script>
</body>
</html>